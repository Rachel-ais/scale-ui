<div class="dashboard">
    <div class="ui-g">
        <div class="ui-g-3">
            <p-panel header="Favorites ({{ favoriteJobTypes.length }})">
                <p-dataTable [value]="favoriteJobTypes" styleClass="nopadding"
                             emptyMessage="You haven't saved any favorites yet. Use the star button on an algorithm below to save it to this list for quick access.">
                    <p-column field="title" [sortable]="false" [filter]="true" filterMatchMode="contains">
                        <ng-template let-col let-item="rowData" pTemplate="body">
                            <app-jobtypeitem [item]="item"></app-jobtypeitem>
                        </ng-template>
                    </p-column>
                </p-dataTable>
            </p-panel>
            <p-panel header="Active Jobs ({{ activeJobTypes.length }})">
                <p-dataTable [value]="activeJobTypes" styleClass="nopadding"
                             [scrollable]="true" scrollHeight="444px">
                    <p-column field="job_type.title" [sortable]="false" [filter]="true" filterMatchMode="contains">
                        <ng-template let-col let-item="rowData" pTemplate="body">
                            <app-jobtypeitem [item]="item"></app-jobtypeitem>
                        </ng-template>
                    </p-column>
                </p-dataTable>
            </p-panel>
        </div>
        <div class="ui-g-7">
            <div class="charts" *ngIf="activeJobTypes.length > 0">
                <p-panel [header]="perfChartTitle">
                    <app-historychart></app-historychart>
                </p-panel>
                <p-panel [header]="activityChartTitle">
                    <app-job-activity></app-job-activity>
                </p-panel>
            </div>
        </div>
        <div class="ui-g-2 dashboard__error-charts">
            <p-panel header="Favorites" *ngIf="favoriteJobTypes">
                <div *ngIf="dataFavs">
                    <h4 *ngIf="favoriteJobTypes.length > 0 && failedFavs > 0">{{ failedFavs }} Failure(s) / {{ totalFavs }} Total</h4>
                    <p-chart type="pie" [data]="dataFavs" [options]="pieChartOptions"
                             *ngIf="favoriteJobTypes.length > 0 && failedFavs > 0"></p-chart>
                    <span *ngIf="favoriteJobTypes.length === 0">No favorites have been selected.</span>
                    <span *ngIf="failedFavs === 0 && favoriteJobTypes.length > 0">No errors have occurred during the past 3 hours</span>
                </div>
            </p-panel>
            <p-panel header="Active Jobs" *ngIf="activeJobTypes">
                <div *ngIf="dataActive">
                    <h4 *ngIf="activeJobTypes.length > 0 && failedActive > 0">{{ failedActive }} Failure(s) / {{ totalActive }} Total</h4>
                    <p-chart type="pie" [data]="dataActive" [options]="pieChartOptions"
                             *ngIf="activeJobTypes.length > 0 && failedActive > 0"></p-chart>
                    <span *ngIf="activeJobTypes.length === 0">There are no active jobs.</span>
                    <span *ngIf="failedActive === 0 && activeJobTypes.length > 0">No errors have occurred during the past 3 hours</span>
                </div>
            </p-panel>
            <p-panel header="All Jobs">
                <div *ngIf="dataAll">
                    <h4>{{ failedAll }} Failure(s) / {{ totalAll }} Total</h4>
                    <p-chart type="pie" [data]="dataAll" [options]="pieChartOptions"></p-chart>
                </div>
            </p-panel>
        </div>
    </div>
</div>
