<h2>Job Types</h2>
<p-dropdown [options]="jobTypes" [autoWidth]="false" [(ngModel)]="selectedJobType" filter="filter"
            [style]="{'width':'300px', 'margin-top':'-10px'}" (onChange)="onRowSelect($event)" placeholder="Select..."></p-dropdown>
<hr />
<div class="text-center" *ngIf="!selectedJobTypeDetail">
    <h3>Select a job type to view its details</h3>
</div>
<div *ngIf="selectedJobTypeDetail">
    <div class="ui-g">
        <div class="ui-g-8 ui-g-nopad">
            <div class="ui-g">
                <div class="ui-g-6 ui-g-nopad">
                    <h3>
                        <i class="fa" [innerHtml]="getUnicode(selectedJobTypeDetail.icon_code)"></i> {{ selectedJobTypeDetail.title }} v{{selectedJobTypeDetail.version }}
                    </h3>
                </div>
                <div class="ui-g-6 ui-g-nopad text-right">
                    <button pButton type="button" class="ui-button-secondary" icon="fa-edit" pTooltip="Edit Job Type"
                            (click)="onEditClick()"></button>
                </div>
            </div>
            <p>
                <strong>Author: </strong> {{ selectedJobTypeDetail.author_name }}<br />
                <a href="{{ selectedJobTypeDetail.author_url }}" target="_blank">Algorithm Description</a><br />
                {{ selectedJobTypeDetail.description }}
            </p>
            <h3>Interface</h3>
            <table class="table table-striped margin-top-md" *ngIf="selectedJobTypeDetail.job_type_interface">
                <tbody>
                <tr *ngIf="selectedJobTypeDetail.job_type_interface.command">
                    <td style="width: 25%">Command</td>
                    <td>{{ selectedJobTypeDetail.job_type_interface.command }}</td>
                </tr>
                <tr *ngIf="selectedJobTypeDetail.job_type_interface.command_arguments">
                    <td style="width: 25%">Command Arguments</td>
                    <td>{{ selectedJobTypeDetail.job_type_interface.command_arguments }}</td>
                </tr>
                <tr *ngIf="selectedJobTypeDetail.job_type_interface.input_data && selectedJobTypeDetail.job_type_interface.output_data">
                    <td colspan="2">
                        <p-treeTable [value]="interfaceData">
                            <p-column field="name" header="Name"></p-column>
                            <p-column field="type" header="Type"></p-column>
                            <p-column header="Media">
                                <ng-template let-node="rowData" pTemplate="body">
                                    <span *ngIf="node.data.media_types">{{ node.data.media_types }}</span>
                                    <span *ngIf="node.data.media_type">{{ node.data.media_type }}</span>
                                </ng-template>
                            </p-column>
                        </p-treeTable>
                    </td>
                </tr>
                <tr *ngIf="selectedJobTypeDetail.job_type_interface.shared_resources && selectedJobTypeDetail.job_type_interface.shared_resources.length > 0">
                    <td>Shared Resources</td>
                    <td>{{ selectedJobTypeDetail.job_type_interface.share_resources }}</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="ui-g-4">
            <dl class="dl-horizontal">
                <dt *ngIf="selectedJobTypeDetail.created">Created:</dt>
                <dd *ngIf="selectedJobTypeDetail.created">{{ selectedJobTypeDetail.created }}</dd>
                <dt *ngIf="selectedJobTypeDetail.last_modified">Last Modified:</dt>
                <dd *ngIf="selectedJobTypeDetail.last_modified">{{ selectedJobTypeDetail.last_modified }}</dd>
                <dt *ngIf="selectedJobTypeDetail.archived">Archived:</dt>
                <dd *ngIf="selectedJobTypeDetail.archived">{{ selectedJobTypeDetail.archived }}</dd>
                <dt *ngIf="selectedJobTypeDetail.cpus_required">CPUs:</dt>
                <dd *ngIf="selectedJobTypeDetail.cpus_required">{{ selectedJobTypeDetail.cpus_required }}</dd>
                <dt *ngIf="selectedJobTypeDetail.mem_required">Memory:</dt>
                <dd *ngIf="selectedJobTypeDetail.mem_required">{{ selectedJobTypeDetail.mem_required_formatted }}</dd>
                <dt *ngIf="selectedJobTypeDetail.mem_required">Shared Memory:</dt>
                <dd *ngIf="selectedJobTypeDetail.mem_required">{{ selectedJobTypeDetail.shared_mem_required_formatted }}</dd>
                <dt *ngIf="selectedJobTypeDetail.disk_out_const_required_formatted">Disk:</dt>
                <dd *ngIf="selectedJobTypeDetail.disk_out_const_required_formatted">{{ selectedJobTypeDetail.disk_out_const_required_formatted }}</dd>
                <dt *ngIf="selectedJobTypeDetail.disk_out_mult_required">Input Size Multiplier:</dt>
                <dd *ngIf="selectedJobTypeDetail.disk_out_mult_required">{{ selectedJobTypeDetail.disk_out_mult_required }}</dd>
                <dt *ngIf="selectedJobTypeDetail.docker_image">Docker Image:</dt>
                <dd *ngIf="selectedJobTypeDetail.docker_image">{{ selectedJobTypeDetail.docker_image }}</dd>
                <dt *ngIf="selectedJobTypeDetail.max_tries">Max Tries:</dt>
                <dd *ngIf="selectedJobTypeDetail.max_tries">{{ selectedJobTypeDetail.max_tries }}</dd>
                <dt *ngIf="selectedJobTypeDetail.priority">Priority:</dt>
                <dd *ngIf="selectedJobTypeDetail.priority">{{ selectedJobTypeDetail.priority }}</dd>
                <dt *ngIf="selectedJobTypeDetail.timeout">Timeout:</dt>
                <dd *ngIf="selectedJobTypeDetail.timeout">{{ selectedJobTypeDetail.timeout }} seconds</dd>
                <dt *ngIf="selectedJobTypeDetail.category">Category:</dt>
                <dd *ngIf="selectedJobTypeDetail.category">{{ selectedJobTypeDetail.category }}</dd>
                <dt *ngIf="selectedJobTypeDetail.is_system">System Type:</dt>
                <dd *ngIf="selectedJobTypeDetail.is_system">{{ selectedJobTypeDetail.is_system }}</dd>
                <dt *ngIf="selectedJobTypeDetail.is_long_running">Long Running:</dt>
                <dd *ngIf="selectedJobTypeDetail.is_long_running">{{ selectedJobTypeDetail.is_long_running }}</dd>
                <dt *ngIf="selectedJobTypeDetail.is_active">Active:</dt>
                <dd *ngIf="selectedJobTypeDetail.is_active">{{ selectedJobTypeDetail.is_active }}</dd>
                <dt *ngIf="selectedJobTypeDetail.is_operational">Operational:</dt>
                <dd *ngIf="selectedJobTypeDetail.is_operational">{{ selectedJobTypeDetail.is_operational }}</dd>
                <dt *ngIf="selectedJobTypeDetail.is_paused">Paused:</dt>
                <dd *ngIf="selectedJobTypeDetail.is_paused">{{ selectedJobTypeDetail.is_paused }}</dd>
                <dt *ngIf="selectedJobTypeDetail.paused">Paused Date:</dt>
                <dd *ngIf="selectedJobTypeDetail.paused">{{ selectedJobTypeDetail.paused }}</dd>
            </dl>
        </div>
    </div>
    <hr />
    <h3 class="text-center">Recent Performance</h3>
    <div class="error-dials">
        <app-error-dials [total]="total6h" [failed]="failed6h" [data]="chartData6h" label="6 Hours"></app-error-dials>
        <app-error-dials [total]="total12h" [failed]="failed12h" [data]="chartData12h" label="12 Hours"></app-error-dials>
        <app-error-dials [total]="total24h" [failed]="failed24h" [data]="chartData24h" label="24 Hours"></app-error-dials>
    </div>
</div>
